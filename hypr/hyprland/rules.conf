windowrule = match:class .*portal.*, float 1, center 1, size 70% 70%
windowrule = match:class .*FileChooser.*, float 1, center 1, size 70% 70%


# -----------------------------------------------------
# WINDOW RULES (Full Restored Setup)
# -----------------------------------------------------

# --- 1. FILE PICKER FIXES (Optimized) ---
# Catch-all for Open/Save dialogs (Firefox, Chrome, KDE, GTK)
windowrulev2 = float, title:(.*)(Open File)(.*)
windowrulev2 = float, title:(.*)(Select a File)(.*)
windowrulev2 = float, title:(.*)(Choose wallpaper)(.*)
windowrulev2 = float, title:(.*)(Open Folder)(.*)
windowrulev2 = float, title:(.*)(Save As)(.*)
windowrulev2 = float, title:(.*)(Library)(.*)
windowrulev2 = float, title:(.*)(File Upload)(.*)
windowrulev2 = float, title:(.*)(wants to save)(.*)
windowrulev2 = float, title:(.*)(wants to open)(.*)

# Geometry for pickers
windowrulev2 = size 70% 70%, title:(.*)(Open File)(.*)
windowrulev2 = size 70% 70%, title:(.*)(Select a File)(.*)
windowrulev2 = size 70% 70%, title:(.*)(Save As)(.*)
windowrulev2 = center, title:(.*)(Open File)(.*)
windowrulev2 = center, title:(.*)(Select a File)(.*)

# --- 2. PORTAL FIXES (Prevent Freezes) ---
windowrulev2 = float, class:(xdg-desktop-portal-gtk)
windowrulev2 = size 70% 70%, class:(xdg-desktop-portal-gtk)
windowrulev2 = dimaround, class:(xdg-desktop-portal-gtk)
# KDE Portal specific
windowrulev2 = float, class:(org.freedesktop.impl.portal.desktop.kde)
windowrulev2 = size 70% 70%, class:(org.freedesktop.impl.portal.desktop.kde)
windowrulev2 = center, class:(org.freedesktop.impl.portal.desktop.kde)

# --- 3. FLOATING APPS ---
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(blueberry\.py)$
windowrulev2 = float, class:^(guifetch)$
windowrulev2 = size 45% 50%, class:^(pavucontrol)$
windowrulev2 = size 45% 50%, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float, class:^(illogical-impulse Settings)$
windowrulev2 = float, title:^(illogical-impulse Settings)$

#windowrulev2 = float, class:^(illogical-impulse Settings)$
# Zotero (Restored)
windowrulev2 = float, class:^(Zotero)$
windowrulev2 = size 45% 50%, class:^(Zotero)$

# --- 4. PLASMA / KDE RULES (Restored) ---
windowrulev2 = float, class:(.*plasmawindowed.*)
windowrulev2 = float, class:(kcm_.*)
windowrulev2 = float, class:(.*bluedevilwizard)
windowrulev2 = float, title:(.*Welcome)
#windowrulev2 = float, title:^(illogical-impulse Settings)$
windowrulev2 = float, title:(.*Shell conflicts.*)
# Move rules
windowrulev2 = float, class:^(plasma-changeicons)$
windowrulev2 = noinitialfocus, class:^(plasma-changeicons)$
windowrulev2 = move 999999 999999, class:^(plasma-changeicons)$
windowrulev2 = move 40 80, title:^(Copying â€” Dolphin)$

# --- 5. TILING OVERRIDES ---
windowrulev2 = tile, class:^(dev\.warp\.Warp)$

# --- 6. EXTRAS ---
windowrulev2 = float 1, title:^(.*is sharing your screen\.)$
windowrulev2 = pin 1, title:^(.*is sharing your screen\.)$
windowrulev2 = move 100%-w-10 100%-w-10, title:^(.*is sharing your screen\.)$

# Picture-in-Picture
windowrulev2 = float, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = pin, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = move 73% 72%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = size 25% 25%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# Tearing & Shadows
windowrulev2 = immediate, class:^(steam_app).*
windowrulev2 = immediate, title:.*\.exe
windowrulev2 = immediate, title:.*minecraft.*
windowrulev2 = noshadow, floating:0

# Workspace Rule
workspace = special:special, gapsout:30

